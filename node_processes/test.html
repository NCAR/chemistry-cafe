% cat atomics.cuf
module atomictests
  contains
    attributes&#40;global&#41; subroutine testatomicadd&#40; a &#41;
    integer, device &#58;&#58; a
    i = threadIdx%x
    istat = atomicadd&#40;a, i&#41;
    return
    end subroutine testatomicadd

end module atomictests

program t
use atomictests
integer, allocatable, device &#58;&#58; n
integer m
allocate&#40;n&#41;
n = 0
call testatomicadd<<<1,5>>> &#40;n&#41;
m = n
print *, m
end
% pgf90 atomics.cuf -V10.9; a.out
